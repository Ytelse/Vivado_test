--------------- Initial state ---------------

dmem_word[0] = 1
dmem_word[1] = 2
dmem_word[5] = 6
dmem_word[7] = 8

dmem_word[20] = 0x98
dmem_word[21] = 0xA8

r1 = 0
r2 = 0
r3 = 0
r4 = 0
r5 = 0
r6 = 0
r7 = 0
r8 = 0
r9 = 0
r10 = 0
r11 = 0
r12 = 0
r13 = 0
r14 = 0
r15 = 0
r16 = 0
r17 = 0
r18 = 0
r19 = 0
r20 = 0
r21 = 0
r22 = 0
r23 = 0
r24 = 0
r25 = 0
r26 = 0
r27 = 0
r28 = 0
r29 = 0
r30 = 0
r31 = 0

----------------- Test code -----------------

  lw $1, 0($1)
  lw $1, 0($1)

  lw $2, 5($0)
  addu $2, $2, $2

  lw $3, 7($0)
  sw $3, -1($3)

  lw $4, 1($0)
  beq $4, $1, 1f
  sw $0, 97($0)
  sw $0, 98($0)
1:
  j 1f
  sw $0, 99($0)
  sw $0, 100($0)
  sw $0, 101($0)
  sw $0, 102($0)
  sw $0, 103($0)
  sw $0, 104($0)
  sw $0, 105($0)
  sw $0, 106($0)
  sw $0, 107($0)
  sw $0, 108($0)
  sw $0, 109($0)
  sw $0, 110($0)
  sw $0, 111($0)
  sw $0, 112($0)
  sw $0, 113($0)
  sw $0, 114($0)
  sw $0, 115($0)
  sw $0, 116($0)
  sw $0, 117($0)
  sw $0, 118($0)
  sw $0, 119($0)
  sw $0, 120($0)
  sw $0, 121($0)
  sw $0, 122($0)
  sw $0, 123($0)

1:
  lw $5, 20($0)    # jr_target_1
  jr $5

jr_target_1:
  addu $6, $6, $1

  lw $7, 21($0)    # jr_target_2
  nop
  jr $7

jr_target_2:
  addu $6, $6, $1

  lw $8, 21($0)    # jr_target_2
  addiu $8, $8, 16 # jr_target_2 + 16 = jr_target_3
  jr $8

jr_target_3:
  addu $6, $6, $1

test_complete:
  j .

  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)
  sw $0, 0($0)



---------- Expected state updates -----------

r1 = 1
r1 = 2

r2 = 6
r2 = 12

r3 = 8
dmem_word[7] = 8

r4 = 2

r5 = 0x98
r6 = 2

r7 = 0xA8
r6 = 4

r8 = 0xA8
r8 = 0xB8
r6 = 6

------------ Timeout cycle count ------------
520